<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v6.1.1/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" /> -->

<script src="https://kit.fontawesome.com/73db2f45cc.js" crossorigin="anonymous"></script>


   <style>


       body { background-color: #121212; color: white; font-family: 'Segoe UI', sans-serif; padding: 20px; }

h2, h3, caption { color: white; margin-bottom: 16px; }

table { width: 100%; border-collapse: collapse; margin-bottom: 40px; }

thead { background-color: #1f1f1f; }

th, td { padding: 8px 12px; border: 1px solid #333; text-align: center; }

th { font-weight: bold; }

.winner-box { background-color: #1e1e1e; padding: 16px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 0 10px rgba(255, 255, 255, 0.1); }

.winner-title { font-size: 1.3em; font-weight: bold; margin-bottom: 10px; }

.winner-line { display: flex; justify-content: space-between; padding: 6px 0; border-top: 1px solid #444; }

.winner-line span:first-child { color: gold; font-weight: bold; text-shadow: 0 0 5px gold; }

.score-display { color: #ccc; font-weight: normal; }

caption { caption-side: top; font-weight: bold; font-size: 1.2em; text-align: left; margin: 10px 0; color: white; }

@media screen and (max-width: 600px) { table, thead, tbody, th, td, tr { display: block; } th, td { text-align: right; padding-left: 50%; position: relative; } th::before, td::before { position: absolute; left: 10px; top: 8px; white-space: nowrap; color: #aaa; } }


        

    
        </style>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <title>klasemen LigaDusun Tanjung Bulan</title>
</head>

<body class="bg-dark text-light">
   <!-- <div class="container-fluid d-flex justify-content-center align-items-center" style="height: 100vh;">
     -->   <div class="col-lg-3 d-flex flex-column align-items-center justify-content-center border-custom py-4">
            <div class="d-block border-light border border-2 rounded-circle overflow-hidden" style="width: 8em;"
                data-bs-toggle="modal" data-bs-target="#showImage" id="profile">
                <img class="img-fluid">
            </div>
            <div class="pt-3 text-center">
                <h5>Tanjung Bulan Squad <span style="color:#00BFFF;"><i class="fa-solid fa-circle-check"></i></span></h5><br/>
                
                
                
            </div>
            
    </div> 

    <!-- Modal -->
    <div class="modal fade" id="showImage" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="showImageLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="showImageLabel">Tanjung Bulan Squad</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img class="img-fluid img-thumbnail profile">
                </div>
            </div>
        </div>
    </div>

    <script>
        // * img position
        const position = '/img/tbsquad.jpg';

        // ! Don't change this line
        $(document).ready(() => {
            $('#profile img').attr('src', position);
        });
    </script>


    

    <script>
        $(document).ready(() => {
            $('#profile').on('click', () => {
                $('img.img-fluid.profile').attr('src',
                    $('#profile img').attr('src')
                );
            })
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>



<h5 id="TopGlobal"><i class="fa-solid fa-ranking-star"></i> LigaDusun Tanjung Bulan</h5>

    
    
    <div id="klasemen"></div>

<div style="margin-top: 20px;">
  <strong>Keterangan:</strong>
  <ul>
    <li><strong>P</strong> = Pertandingan Dimainkan</li>
    <li><strong>M</strong> = Menang</li>
    <li><strong>K</strong> = Kalah</li>
    <li><strong>SS</strong> = Skor Set (Contoh: 4-0 1-2)</li>
    <li><strong>Poin:</strong> BO3, jika menang 2:0 = 3 poin, jika menang 2:1 = 2 poin dan kalah dapat 1 poin</li>
  </ul>
</div>

<hr>

<h3>Hasil Pertandingan</h3>
<ul id="hasil-pertandingan"></ul>

<h3>Jadwal Pertandingan</h3>
<ul id="jadwal-pertandingan"></ul>

<hr>

<h3>Daftar Tim & Pemain</h3>
<ul id="tim-pemain"></ul>

<script>
  let teams = {};
  let standings = [];

  async function fetchData() {
    const [teamRes, matchRes] = await Promise.all([
      fetch('tim.json'),
      fetch('main.json')
    ]);

    teams = await teamRes.json();
    const matches = await matchRes.json();

    buildStandings(teams, matches);
    renderStandings();
    renderMatches(matches);
    renderSchedule(matches);
    renderTeamList(teams);
  }

  function buildStandings(teams, matches) {
    standings = Object.keys(teams).map(id => ({
      id,
      name: teams[id].nama,
      played: 0,
      win: 0,
      lose: 0,
      setWin: 0,
      setLose: 0,
      point: 0,
      ssLog: []
    }));

    matches.forEach(m => {
      if (!m.hasil) return;

      const home = standings.find(t => t.id === m.tim1);
      const away = standings.find(t => t.id === m.tim2);

      const [h, a] = m.hasil;

      home.played++;
      away.played++;

      home.setWin += h;
      home.setLose += a;
      away.setWin += a;
      away.setLose += h;

      home.ssLog.push(`${h}-${a}`);
      away.ssLog.push(`${a}-${h}`);

      if (h === 2 && a === 0) {
        home.point += 3;
        home.win++;
        away.lose++;
      } else if (h === 2 && a === 1) {
        home.point += 2;
        away.point += 1;
        home.win++;
        away.lose++;
      } else if (a === 2 && h === 0) {
        away.point += 3;
        away.win++;
        home.lose++;
      } else if (a === 2 && h === 1) {
        away.point += 2;
        home.point += 1;
        away.win++;
        home.lose++;
      }
    });

    standings.sort((a, b) => {
      if (b.point !== a.point) return b.point - a.point;
      const diffA = a.setWin - a.setLose;
      const diffB = b.setWin - b.setLose;
      return diffB - diffA;
    });
  }

  function renderStandings() {
    const table = document.createElement('table');
    table.border = 1;
    const thead = `<tr>
      <th>No</th><th>Tim</th><th>P</th><th>M</th><th>K</th><th>SS</th><th>Poin</th>
    </tr>`;
    const rows = standings.map((t, i) => `
      <tr>
        <td>${i + 1}</td>
        <td>${t.name}</td>
        <td>${t.played}</td>
        <td>${t.win}</td>
        <td>${t.lose}</td>
        <td>${t.ssLog.join(' ')}</td>
        <td style="color: green; font-weight: bold">${t.point}</td>
      </tr>
    `).join('');
    table.innerHTML = thead + rows;
    document.getElementById('klasemen').appendChild(table);
  }

  function renderMatches(matches) {
    const hasilList = document.getElementById('hasil-pertandingan');
    matches.forEach(m => {
      if (!m.hasil) return;
      const tim1 = teams[m.tim1].nama;
      const tim2 = teams[m.tim2].nama;
      const [h, a] = m.hasil;
      const item = document.createElement('li');
      item.textContent = `${tim1} ${h}-${a} ${tim2}`;
      hasilList.appendChild(item);
    });
  }

  function renderSchedule(matches) {
    const list = document.getElementById('jadwal-pertandingan');
    matches.forEach(m => {
      const tim1 = teams[m.tim1].nama;
      const tim2 = teams[m.tim2].nama;
      const item = document.createElement('li');
      item.textContent = `${tim1} vs ${tim2}`;
      list.appendChild(item);
    });
  }

  function renderTeamList(teams) {
    const list = document.getElementById('tim-pemain');
    Object.entries(teams).forEach(([id, data]) => {
      const item = document.createElement('li');
      item.innerHTML = `<strong>${data.nama}</strong>: ${data.pemain.join(', ')}`;
      list.appendChild(item);
    });
  }

  fetchData();
</script>

<br/><br/>
<center>Made in ©️RISMA AL-HUDA</center>
<br></body>

    </html>
    
