<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v6.1.1/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" /> -->

<script src="https://kit.fontawesome.com/73db2f45cc.js" crossorigin="anonymous"></script>


   <style>

       body { font-family: sans-serif; margin: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #aaa; padding: 8px; text-align: center; }
    th { background-color: #eee; }
    h2 { margin-top: 40px; }

       .profil {
  width: 150px;
  height: 150px;
  border-radius: 50%;
  overflow: hidden;
  background-color: #333;
  /* commented for demo
  float: left;
  margin-left: 125px;
  margin-top: 20px;
  */
  
  /*for demo*/
  display:inline-block;
  vertical-align:middle;
}
.profil img{
  width:100%;
}


       
       
        h2 {
            width: 95%;
            font-size:30px; 
            background-color: #778899; 
            
       }
  
        table {
            width: 98%;
            border-collapse: collapse; justify-content: center; /* Horizontal center */
            align-items: center;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #696969;
        }
        
        
    .navbar {
            position: fixed; /* Membuat navbar tetap di atas */
            top: 0;
            width: 100%;
            background-color: #7FFF00;
            overflow: hidden;
            z-index: 1000; /* Memastikan navbar berada di atas konten lain */
        }

        /* Gaya untuk tautan dalam navbar */
        .navbar a {
            float: left;
            display: block;
            color: black;
            text-align: center;
            padding: 5px 5px;
            text-decoration: blink;
            font-size: 17px;
        }

    /* Ubah warna tautan saat dihover */
        .navbar a:hover {
            background-color: #ddd;
            color: black;
        }

        /* Tambahkan padding ke konten halaman untuk menghindari konten terpotong oleh navbar */
        .content {
            padding: 60px 20px;
            height: 1500px; /* Menambah tinggi halaman untuk memungkinkan pengguliran */
        }

        #backToTopBtn {
            display: block; /* Tampilkan tombol dari awal */
            position: fixed;
            bottom: 15px;
            right: 15px;
            z-index: 99;
            border: none;
            outline: none;
            background-color: #7FFF00;
            color: black;
            cursor: pointer;
            padding: 15px;
            border-radius: 10px;
            font-size: 18px;
        }
         #backToTopBtn:hover {
            background-color: #555; 
        }
        
    
        </style>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <title>BANK RISMA | Rekap Tabungan Online</title>
</head>

<body class="bg-dark text-light">
   
    
    <div class="col-lg-3 d-flex flex-column align-items-center justify-content-center border-custom py-4">
           
    
        
        <div class="d-block border-light border border-2 rounded-circle overflow-hidden" style="width: 8em;"
                data-bs-toggle="modal" data-bs-target="#showImage" id="profile">
        
                <img class="img-fluid">
            </div>
            <span class="pt-3 text-center">

                 <h1><i class="fas fa-wallet">
        
    </i> BANK RISMA</h1>
                
            </span>

        
            
       </div>

    <!-- Modal -->
    <div class="modal fade" id="showImage" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="showImageLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="showImageLabel">RISMA Tanjung Bulan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img class="img-fluid img-thumbnail profile">
                </div>
            </div>
        </div>
    </div> 

    <script>
        // * img position
        const position = '/risma_1.png';

        // ! Don't change this line
        $(document).ready(() => {
            $('#profile img').attr('src', position);
        });
    </script>

    <center>

    
<!--
    <script>
        // list links
        const links = [
            
            
            {

                url: 'jadwal.html',
                icon: 'fas fa-calendar-alt',
                text: 'Jadwal Pertandingan',
            },
           
            
            {

                url: 'hasil.html',
                icon: 'fas fa-hourglass-end',
                text: 'Hasil Pertandingan',
            },

            
           
        ];

        // ! Don't change this line
        $(document).ready(() => {
            const callbackMap = (element, i) => {
                return  /*html*/`
                <li class="my-3 py-3 px-5 border border-light">
                    <a target="" href="${element.url}" class="text-decoration-none"
                        style="font-weight: 450;">
                        <i class="fa-fw ${element.icon}"></i>
                        ${element.text}
                    </a>
                </li>
                `;
            };
            $('.list-unstyled.links').append($.map(links, callbackMap));
        });
    </script>

 -->
        
        
   

       

    </center>
    

    <script>
        $(document).ready(() => {
            $('#profile').on('click', () => {
                $('img.img-fluid.profile').attr('src',
                    $('#profile img').attr('src')
                );
            })
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>


<center>

    <p id="last-updated" style="font-style: italic; font-size: 14px;"></p>

<script>
  const updatedAt = new Date(document.lastModified);
  const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute:'2-digit' };
  document.getElementById("last-updated").innerText = "Terakhir diperbarui: " + updatedAt.toLocaleDateString('id-ID', options);
</script>

    <h2>Total Tabungan</h2>                
<div id="rekap-tabungan"></div>   



      
<h2>Laporan Bulanan</h2>                
<div id="tabungan-bulanan"></div>



          <!-- Tombol Salin Rekap Total -->
<div style="margin-top: 10px;">
  <button onclick="salinRekapTotal()" style="background-color:#4a148c;color:#fff;padding:10px 20px;border:none;border-radius:8px;font-weight:bold;font-size:16px;cursor:pointer;">
    📋 Salin Rekap Total Tabungan
  </button>
</div>

<!-- Script tambahan -->
<script>
function salinRekapTotal() {
  // Ambil nama file terbaru dari reversedFiles
  const namaFileTerbaru = reversedFiles[0];
  const dataTerbaru = dataBulananTersimpan[namaFileTerbaru];
  if (!dataTerbaru) {
    alert("Data bulan terbaru belum tersedia.");
    return;
  }

  const bulanTahun = formatNamaBulan(namaFileTerbaru);

  // Persiapan data bulanan terbaru
  const combinedDataBulan = [];
  let totalPutraBulan = 0, totalPutriBulan = 0, totalTabunganBulan = 0, totalTarikBulan = 0;

  ["putra", "putri"].forEach(jenis => {
    dataTerbaru[jenis]?.forEach(item => {
      combinedDataBulan.push({ ...item, jenis });
      if (jenis === "putra") totalPutraBulan += item.tabungan;
      else totalPutriBulan += item.tabungan;
      totalTabunganBulan += item.tabungan;
      totalTarikBulan += item.penarikan;
    });
  });

  combinedDataBulan.sort((a, b) => (b.tabungan - b.penarikan) - (a.tabungan - a.penarikan));

  let teks = `💰 *Tabungan Bulan ${bulanTahun}*\n`;
  combinedDataBulan.forEach(({ nama, tabungan, penarikan }) => {
    const simbol = tabungan > 0 ? '➕' : '➖';
    const nilai = tabungan > 0 ? tabungan : penarikan;
    teks += `${nama} ${simbol} ${formatRupiah(nilai)}\n`;
  });

  teks += `\n💡 *Ringkasan Bulan ${bulanTahun}*\n`;
  teks += `👨Tabungan Putra: ${formatRupiah(totalPutraBulan)}\n`;
  teks += `👧Tabungan Putri: ${formatRupiah(totalPutriBulan)}\n`;
  teks += `🤑Total Tabungan: ${formatRupiah(totalTabunganBulan)}\n`;
  teks += `🏧Total Penarikan: ${formatRupiah(totalTarikBulan)}\n\n`;

  // Rekap Total
  const dataArray = Object.entries(rekapData).map(([nama, val]) => {
    const saldo = val.tabungan - val.penarikan;
    return { nama, ...val, saldo };
  });

  dataArray.sort((a, b) => b.saldo - a.saldo);

  teks += `🏦 *Total Tabungan BANK RISMA*\n`;
  dataArray.forEach((item, idx) => {
    teks += `${idx + 1}. ${item.nama} ${formatRupiah(item.saldo)}\n`;
  });

  let totalPutra = 0, totalPutri = 0, totalTabungan = 0, totalPenarikan = 0, sisa = 0;

  dataArray.forEach(({ jenis, tabungan, penarikan, saldo }) => {
    if (jenis === "putra") totalPutra += tabungan;
    else totalPutri += tabungan;
    totalTabungan += tabungan;
    totalPenarikan += penarikan;
    sisa += saldo;
  });

  teks += `\n💡 *Ringkasan*\n`;
  teks += `👨Tabungan Putra: ${formatRupiah(totalPutra)}\n`;
  teks += `👧Tabungan Putri: ${formatRupiah(totalPutri)}\n`;
  teks += `🤑Total Tabungan: ${formatRupiah(totalTabungan)}\n`;
  teks += `🏧Total Penarikan: ${formatRupiah(totalPenarikan)}\n`;
  teks += `💲Sisa Saldo: ${formatRupiah(sisa)}\n\n`;

  teks += `📍Tabungan di urutkan otomatis dari yang terbanyak\n`;
  teks += `📍Tidak boleh diambil kecuali kondisi darurat dan puasa Ramadhan.\n`;
  teks += `📍Tidak boleh dipinjam untuk keperluan pribadi\n`;
  teks += `📍Uang akan dikelola secara bijak demi kemakmuran bersama\n\n`;
  teks += `Info selengkapnya👉 https://tanjungbulan.my.id/bank-risma`;

  navigator.clipboard.writeText(teks).then(() => {
    alert("Rekap tabungan lengkap disalin ke clipboard!");
  });
}
</script>   

              
                
<script>        
const bulanFiles = [        
  "februari2026.json",        
  "januari2026.json",        
  "desember2025.json",        
  "november2025.json",        
  "oktober2025.json",        
  "september2025.json",        
  "agustus2025.json"        
];        
        
const bulanMap = {        
  januari: 1, februari: 2, maret: 3, april: 4, mei: 5, juni: 6,        
  juli: 7, agustus: 8, september: 9, oktober: 10, november: 11,        
  desember: 12        
};        
        
const toNum = (name) => {        
  const nama = name.replace('.json', '');        
  const bulanStr = nama.slice(0, -4);        
  const tahun = parseInt(nama.slice(-4));        
  const bulan = bulanMap[bulanStr] || 0;        
  return tahun * 100 + bulan;        
};        
        
const sortedFiles = [...bulanFiles].sort((a, b) => toNum(a) - toNum(b));        
const reversedFiles = [...sortedFiles].reverse();        
const formatRupiah = (num) => num.toLocaleString('id-ID');        
        
let rekapData = {};        
let saldoTerakhir = {};        
let dataBulananTersimpan = {};        
        
function updateRekap(nama, jenis, tabungan, penarikan) {        
  if (!rekapData[nama]) {        
    rekapData[nama] = { jenis, tabungan: 0, penarikan: 0 };        
  }        
  rekapData[nama].tabungan += tabungan;        
  rekapData[nama].penarikan += penarikan;        
}        
        
function renderTabelRekap() {        
  const container = document.getElementById("rekap-tabungan");        
  let totalPutra = 0, totalPutri = 0, totalTabungan = 0, totalTarik = 0, totalSaldo = 0;        
        
  const dataArray = Object.entries(rekapData).map(([nama, val]) => {        
    const saldo = val.tabungan - val.penarikan;        
    return { nama, ...val, saldo };        
  });        
        
  dataArray.sort((a, b) => b.saldo - a.saldo);        
        
  let rows = '';        
  dataArray.forEach(({ nama, jenis, tabungan, penarikan, saldo }) => {        
    if (jenis === "putra") totalPutra += tabungan;        
    else totalPutri += tabungan;        
    totalTabungan += tabungan;        
    totalTarik += penarikan;        
    totalSaldo += saldo;        
        
    rows += `<tr>        
      <td>${nama}</td>        
      <td>${formatRupiah(tabungan)}</td>        
      <td>${formatRupiah(penarikan)}</td>        
      <td><span style="color:green">${formatRupiah(saldo)}</span></td>        
    </tr>`;        
  });        
        
  container.innerHTML = `        
    <table border="1" cellspacing="0" cellpadding="5">        
      <thead>        
        <tr>        
          <th>Nama</th>        
          <th>Tabungan</th>        
          <th>Penarikan</th>        
          <th>Saldo</th>        
        </tr>        
      </thead>        
      <tbody>${rows}</tbody>        
    </table>        
    <p><br/>        
      Total Tabungan Putra: ${formatRupiah(totalPutra)}<br/>        
      Total Tabungan Putri: ${formatRupiah(totalPutri)}<br/>        
      Total Semua Tabungan: ${formatRupiah(totalTabungan)}<br/>        
      Total Penarikan Saldo: ${formatRupiah(totalTarik)}<br/>        
      Sisa Saldo: <span style="color:green">${formatRupiah(totalSaldo)}</span>        
    </p><br/>        
    <hr/>        
  `;        
}        
        
function formatNamaBulan(namaFile) {        
  const nama = namaFile.replace('.json', '');        
  const match = nama.match(/([a-z]+)(\d+)/i);        
  if (!match) return namaFile;        
  const [_, bulan, tahun] = match;        
  return bulan.charAt(0).toUpperCase() + bulan.slice(1) + ' ' + tahun;        
}        
        
function renderBulananSemua() {        
  const container = document.getElementById("tabungan-bulanan");        
        
  reversedFiles.forEach(namaFile => {        
    const data = dataBulananTersimpan[namaFile];        
    if (!data) return;        
        
    const combinedData = [];        
    let totalPutra = 0, totalPutri = 0, totalTabungan = 0, totalTarik = 0;        
        
    ["putra", "putri"].forEach(jenis => {        
      data[jenis]?.forEach(item => {        
        combinedData.push({ ...item, jenis });        
        if (jenis === "putra") totalPutra += item.tabungan;        
        else totalPutri += item.tabungan;        
        totalTabungan += item.tabungan;        
        totalTarik += item.penarikan;        
      });        
    });        
        
    combinedData.sort((a, b) => b.tabungan - a.tabungan);        
        
    let rows = '';        
    combinedData.forEach(({ nama, tabungan, penarikan }) => {        
      rows += `<tr>        
        <td>${nama}</td>        
        <td>${formatRupiah(tabungan)}</td>        
        <td>${formatRupiah(penarikan)}</td>        
      </tr>`;        
    });        
        
    container.innerHTML += `        
      <h3>${formatNamaBulan(namaFile)}</h3>        
      <table border="1" cellspacing="0" cellpadding="5">        
        <thead>        
          <tr>        
            <th>Nama</th>        
            <th>Tabungan</th>        
            <th>Penarikan</th>        
          </tr>        
        </thead>        
        <tbody>${rows}</tbody>        
      </table>        
      <p><br/>        
        Tabungan Putra: ${formatRupiah(totalPutra)}<br/>        
        Tabungan Putri: ${formatRupiah(totalPutri)}<br/>        
        Semua Tabungan: ${formatRupiah(totalTabungan)}<br/>        
        Penarikan Saldo: ${formatRupiah(totalTarik)}        
      </p><br/>        
      <hr/>        
    `;        
  });        
}        
        
async function loadSemua() {        
  for (let namaFile of sortedFiles) {        
    try {        
      const res = await fetch(`data/${namaFile}`);        
      if (!res.ok) continue;        
      const data = await res.json();        
      if (!data.putra && !data.putri) continue;        
      dataBulananTersimpan[namaFile] = data;        
    } catch (e) {        
      console.warn(`Gagal membaca ${namaFile}`);        
    }        
  }        
        
  for (let namaFile of sortedFiles) {        
    const data = dataBulananTersimpan[namaFile];        
    if (!data) continue;        
        
    ["putra", "putri"].forEach(jenis => {        
      data[jenis]?.forEach(item => {        
        const { nama, tabungan, penarikan } = item;        
        const saldoLalu = saldoTerakhir[nama] || 0;        
        const saldoKini = saldoLalu + tabungan - penarikan;        
        saldoTerakhir[nama] = saldoKini;        
        updateRekap(nama, jenis, tabungan, penarikan);        
      });        
    });        
  }        
        
  renderBulananSemua();        
  renderTabelRekap();        
}        
        
loadSemua();        
</script>        

        
    <p></p>
<~ Made in RISMA ~>
    <center>
        <hr/>
        <span class="h5">Leader</span><br/>
        <div class="profil">
            <img src="/risma/img/pulung.png"/>
        </div><br/>
        Pulung R.
        <p></p>
        
        <hr/>
        <span class="h5">Co-Leader</span><br/>
        <div class="profil">
            <img src="/risma/img/faisol.jpg"/>
        </div><br/>
        Faisol
        <p></p>

        

        <hr/>
        <span class="h5">Sekertaris</span><br/>
        <div class="profil">
            <img src="/risma/img/anis.jpg"/>
        </div><br/>
        Anis
        <p></p>
        <div class="profil">
            <img src="/risma/img/putri.jpg"/>
        </div><br/>
        Putri
        <p></p>

        <hr/>
        <span class="h5">Bendahara</span><br/>
        <div class="profil">
            <img src="/risma/img/tama.jpg"/>
        </div><br/>
        Tama
        <p></p>

        <div class="profil">
            <img src="/risma/img/nadia.jpg"/>
        </div><br/>
        Nadia
        <p></p>

        <hr/>
        <span class="h5">Humas</span><br/>
        <div class="profil">
            <img src="/risma/img/rifai.jpg"/>
        </div><br/>
        Rifai
        <p></p>
        <div class="profil">
            <img src="/risma/img/tio.jpg"/>
        </div><br/>
        Tio
        <p></p>

        <hr/>
        <span class="h5">Marketing</span><br/>
        <div class="profil">
            <img src="/risma/img/sasa.jpg"/>
        </div><br/>
        Sasa
        <p></p>
        <div class="profil">
            <img src="/risma/img/riswadi.jpg"/>
        </div><br/>
        Riswadi
        <p></p>

        <hr/>
        <span class="h5">Jumat Berkah</span><br/>
        <div class="profil">
            <img src="/risma/img/nabila.jpg"/>
        </div><br/>
        Nabila
        <p></p>
        <div class="profil">
            <img src="/risma/img/irma.jpg"/>
        </div><br/>
        Irma
        <p></p>

        

        <hr/>
        <span class="h5">Perlengkapan</span><br/>
        <div class="profil">
            <img src="/risma/img/rifky.jpg"/>
        </div><br/>
        Rifky
        <p></p>
        <div class="profil">
            <img src="/risma/img/syifa.jpg"/>
        </div><br/>
        Syifa
        <p></p>

        <hr/>
        <span class="h5">Yang Punya Kawasan</span><br/>

        <div class="profil">
            <img src="/risma/img/mul.jpg"/>
        </div><br/>
        Mulyono
        <p></p>

        <div class="profil">
            <img src="/risma/img/wahyu.jpg"/>
        </div><br/>
        Wahyu
        <p></p>
        
        <div class="profil">
            <img src="/risma/img/rizki.jpg"/>
        </div><br/>
        Rizky
        <p></p>
        <div class="profil">
            <img src="/risma/img/aril.jpg"/>
        </div><br/>
        Aril
        <p></p>

        <div class="profil">
            <img src="/risma/img/yogi.jpg"/>
        </div><br/>
        Yogi
        <p></p>
        <div class="profil">
            <img src="/risma/img/asa.jpg"/>
        </div><br/>
        Asa
        <p></p>

        <div class="profil">
            <img src="/risma/img/yuyun.jpg"/>
        </div><br/>
        Yuyun
        <p></p>
        <div class="profil">
            <img src="/risma/img/firli.jpg"/>
        </div><br/>
        Firli
        <p></p>

        
        <div class="profil">
            <img src="/risma/img/hanafi.jpg"/>
        </div><br/>
        Hanapi
        <p></p>
        
<hr/>
    <ul class="list-unstyled links">
    </ul>

        <!-- Notifikasi Sambutan -->
<div id="notifRisma" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.75);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
">
  <div style="
    background: #fff;
    padding: 24px;
    max-width: 400px;
    width: 90%;
    border-radius: 8px;
    text-align: center;
    font-family: sans-serif;
  ">
    <p style="margin-bottom: 16px; font-size: 16px; color: black;">
      <strong>Selamat datang<br/>di server resmi BANK RISMA !!</strong><br><br>
      Server ini diciptakan untuk membantu <strong>Tama</strong> dan <strong>Putri</strong> melakukan pendataan dan pengelolaan uang secara otomatis.<br><br>
      Server baru akan dirilis pada bulan <strong>Agustus 2025</strong> ya ges.<br/><br/>Tapi kalo kamu pengen liat contoh gambarannya seperti apa, boleh banget kok!!<br><br>
      <em>Mau lanjut ngintip dulu gak?</em>
    </p>
    <button onclick="document.getElementById('notifRisma').style.display='none'" style="
      padding: 8px 16px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
    ">Ok Lanjut</button>
  </div>
</div>

<p></p> <br/>
    
    Made With ❤️ by Hamba Allah</center>
<br></body>

    </html>
